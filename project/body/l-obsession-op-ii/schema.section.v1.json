{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.invalid/les-humeurs/schema.section.v1.json",
  "title": "Section Manifest (v1)",
  "description": "Schema for a section-level manifest file (e.g. `desir.json`) that lists the ordered contents of a section directory under `body/...`.",
  "$comment": "Legacy section manifest shape retained for compatibility. The canonical section manifest for this project is `section.json` (schema `schema.section.v2`).",
  "type": "object",
  "additionalProperties": false,
  "required": ["id", "title", "subtitle", "block_type", "ordering", "contents"],
  "properties": {
    "id": {
      "type": "string",
      "minLength": 1,
      "description": "Stable identifier for the section (adopted convention: `<slug>-op-<roman>`, e.g. `ruin-op-iii`). Used as `parent_section` in item manifests.",
      "examples": ["l-obsession-op-ii", "ruin-op-iii", "desir-op-iv"]
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Human-facing section title.",
      "examples": ["L'Obsession", "Ruin", "Desir"]
    },
    "subtitle": {
      "type": ["string", "null"],
      "description": "Optional subtitle for display; often used for opus labeling (e.g. `Op. IV`).",
      "examples": ["Op. II", "Op. III", null]
    },
    "block_type": {
      "const": "section",
      "description": "Discriminator for this manifest type. Always `section`."
    },
    "ordering": {
      "const": "fixed",
      "description": "Declares that ordering is explicit and must not be inferred. `contents[].order` is authoritative."
    },
    "contents": {
      "type": "array",
      "minItems": 1,
      "description": "Ordered list of entries in this section. Each entry's `path` must match a sibling directory name.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["order", "type", "path"],
        "properties": {
          "order": {
            "type": "integer",
            "minimum": 1,
            "description": "1-based order of this entry within the section. Must be unique within `contents` (enforced socially/externally; JSON Schema doesn't enforce uniqueness by default).",
            "examples": [1, 2, 10]
          },
          "type": {
            "enum": ["poem", "cycle", "multipartpoem"],
            "description": "High-level entry kind. `poem` covers leaf poems and prose poems. `cycle` and `multipartpoem` are containers with movement subfolders.",
            "examples": ["poem", "cycle", "multipartpoem"]
          },
          "path": {
            "type": "string",
            "minLength": 1,
            "description": "Directory name for this entry, relative to the section directory. Must match an actual folder that contains the corresponding item manifest `<path>/<path>.json`.",
            "examples": ["01-apologia", "10-then-into-the-high-place", "11-economic-decay-triptych"]
          }
        }
      }
    }
  }
}
